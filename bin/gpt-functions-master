#!/usr/bin/env bash

sub_agent_wikipedia(){
  suche=$(echo "$1"|jq --compact-output -r '.search')
  echo "Starting Wikipedia agent for $suche">&2
  echo "$suche" | ~/.normen/bin/gpt-chat -xq -f core -f wikipedia -M "gpt-3.5-turbo-16k" -s "Du bist ein freundlicher KI Assistent der stets mit akkuraten Informationen zur Hilfe steht. Nutze Deine Wikipedia funktionen intensiv und oft um korrekte Informationen zu liefern, gerne auch mehrmals in Folge. Findest Du auch nach intensiver Suche und mehreren Versuchen keine Informationen auf Wikipedia lieferst Du eine Vermutung und bezeichnest diese auch als solche."
}

master_functions(){
  echo '[
    {
      "name": "sub_agent_wikipedia",
      "description": "Startet einen KI Assistenten der eine Frage mittels Wikipedia beantwortet. Er hat erweiterte Funktionen und kann ganze Artikel durchsuchen.",
      "parameters": {
        "type": "object",
        "properties": {
          "search": {
            "type": "string",
            "description": "Die Suchanfrage, z.B. `Wie viele Einwohner hat Deutschland?`"
          }
        },
        "required": ["search"]
      }
    }
  ]'
}

